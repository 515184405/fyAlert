var zIndex=2501314;var fyAlertKey=0;var fyAlert={alert:function(b){var a={title:"提示",icon:"",content:"",skin:"",position:"fixed",closeBtn:true,type:1,drag:false,time:2000,shadow:[0.3,"#000"],shadowClose:true,animateType:0,aniExtend:"",area:["auto","auto"],minmax:false,direction:["center","center"],btns:{},success:function(){},end:function(){}};this.params=$.extend({},a,b);this.setParamsFun();this.createElem();return this.deepCopy(this)},msg:function(c,b){var a={title:false,icon:"",content:c,skin:"fy-alert-msg",position:"fixed",closeBtn:false,type:1,drag:false,time:2000,shadow:false,shadowClose:false,animateType:1,aniExtend:"",area:["auto","auto"],direction:["center","center"],btns:{},success:function(){},end:function(){}};this.params=$.extend({},a,b);this.setParamsFun();this.createElem();return this},setAnimateType:function(a){this.animateType="";if(a.aniExtend){this.animateType=a.aniExtend}else{switch(a.animateType){case 0:this.animateType="rollIn";break;case 1:this.animateType="slideBottom";break;case 2:this.animateType="slideTop";break;case 3:this.animateType="slideLeft";break;case 4:this.animateType="slideRight";break;defalut:this.animateType="slideBottom"}}},setParamsFun:function(){this.setAnimateType(this.params);this.iconType="";switch(this.params.icon){case 0:this.iconType="";break;case 1:this.iconType="&#xe602;";break;case 2:this.iconType="&#xe603;";break;case 3:this.iconType="&#xe631;";break;case 4:this.iconType="&#xe601;";break;case 5:this.iconType="&#xe600;";break;defalut:this.iconType=""}},createElem:function(){var i=this;fyAlertKey=fyAlertKey+=1;var h=$("<div id=alertKey"+fyAlertKey+" style='width:"+this.params.area[0]+";height:"+this.params.area[1]+"' class='fy-alert-box "+this.params.skin+"'></div>");var e=$("<div class='fy-alert-header'>"+(this.params.title?this.params.title:"")+"</div>");var k=$("<div class='fy-alert-content'></div>");var b=!this.params.shadow?"":$("<div class='fy-alert-shadow'></div>");var a=$("<div class='fy-alert-footer'></div>");var j=$("<button class='fy-alert-close'><i class='alert-iconfont'>&#xe671;</i></button>");var g=$('<iframe name="iframe'+fyAlertKey+'" id="iframe'+fyAlertKey+'" class="fy-alert-iframe" src="'+this.params.content+'"></iframe>');var m=$("<button class='fy-alert-minmax'><i class='fy-alert-max-btn'></i></button>");var d={alertBox:h,alertShadow:b,params:i.params};if(this.params.closeBtn){e.append(j);(function(n){j.bind("click",function(){n.destory(d)})})(i)}if(this.params.type==2){k.addClass("fy-alert-content-iframe").append(g)}else{if(this.iconType){k.addClass("fy-alert-icon");var c=$('<i class="fy-alert-iconType'+this.params.icon+' alert-iconfont">'+this.iconType+"</i>");if(this.params.icon==4||this.params.icon==5){c.addClass("fy-alert-icon-loading")}k.append(c)}this.params.content=typeof(this.params.content)=="string"?this.params.content:this.params.content.clone().show();k.append(this.params.content)}this.alertBox=h;this.alertShadow=b;this.alertContent=k;this.alertTitle=e;this.alertFooter=a;this.minmaxBtn=m;if(this.params.minmax){this.minmaxType=1;e.append(this.minmaxBtn);(function(n){n.minmaxBtn.bind("click",function(){n.scaleFun(n)})})(i.deepCopy(this))}for(var l in this.params.btns){var f=$('<button class="fy-alert-btn">'+l+"</button>");(function(n,o){f.click(function(p){o.params.btns[n](o)})})(l,i.deepCopy(i));a.append(f)}if(this.params.title){h.append(e)}h.append(k);if(a.find(".fy-alert-btn").length>0){h.append(a)}if(!this.params.title&&a.find(".fy-alert-btn").length==0){(function(n){setTimeout(function(){i.destory(n)},i.params.time)})(d)}$("body").append(h).append(b);this.setAlertLocation();this.setAlertContentHeight();if(this.params.drag){this.dragElem(e)}this.addAlertZIndex(this.alertTitle);if(this.params.shadowClose){this.alertShadow.length&&(function(n){i.alertShadow.bind("click",function(){i.destory(n)})})(d)}this.show();$(window).bind("resize",$.proxy(this,"setAlertLocation"))},deepCopy:function(c){var a=this.isArray(c)?[]:{};for(var b in c){if(c.hasOwnProperty(b)){if(typeof c[b]==="object"&&c[b]!==null&&!(c[b] instanceof jQuery)){a[b]=this.deepCopy(c[b])}else{a[b]=c[b]}}}return a},addAlertZIndex:function(a){a.bind("click",function(b){zIndex=zIndex+10;a.css("z-index",zIndex);b.stopPropagation()})},dragElem:function(a){$(document).on("mousedown",a,function(h){$("body").attr("onselectstart","return false");var g=$(h.target).closest(".fy-alert-box");var c=h.clientX,b=h.clientY,f=parseInt(g.css("left")),d=parseInt(g.css("top"));$(document).on("mousemove",a,function(k){var j=k.clientX,i=k.clientY;g.css({left:f+(j-c)+"px",top:d+(i-b)+"px"});k.stopPropagation()});h.stopPropagation()});$(document).on("mouseup",function(){$("body").attr("onselectstart","return true");$(document).off("mousemove")})},setAlertLocation:function(){this.setAlertStyle={};zIndex+=10;this.setAlertStyle["z-index"]=zIndex;this.alertShadow.length&&this.alertShadow.css("z-index",zIndex-1);if(this.isArray(this.params.shadow)){this.alertShadow.length&&this.alertShadow.css({"opacity":this.params.shadow[0],"background":this.params.shadow[1],})
}else{this.alertShadow.length&&this.alertShadow.css({"opacity":this.params.shadow,})}this.setAlertStyle["position"]=this.params.position;this.alertBox.css(this.setAlertStyle);if(this.params.direction[0]=="center"){this.setAlertStyle["margin-left"]=-this.alertBox[0].clientWidth/2}if(this.params.direction[1]=="center"){this.setAlertStyle["margin-top"]=-this.alertBox[0].clientHeight/2}if(/^\d/.test(this.params.direction)){this.setAlertStyle["left"]=this.params.direction[0]}else{if(this.params.direction[0]!="center"){this.setAlertStyle[this.params.direction[0]]=0}else{this.setAlertStyle["left"]="50%"}}if(/^\d/.test(this.params.direction)){this.setAlertStyle["top"]=this.params.direction[1]}else{if(this.params.direction[1]!="center"){this.setAlertStyle[this.params.direction[1]]=0}else{this.setAlertStyle["top"]="50%"}}this.alertBox.css(this.setAlertStyle)},isArray:function(a){return Object.prototype.toString.call(a)=="[object Array]"},setAlertContentHeight:function(){this.alertContent.css("height",this.alertBox[0].clientHeight-(!!this.alertTitle[0]?this.alertTitle[0].clientHeight:0)-this.alertFooter[0].clientHeight)},scaleFun:function(a){a=a?a:this;if(a.minmaxType==1){a.alertBox.css({width:"100%",height:"100%","margin-left":0,"margin-top":0,left:0,top:0});a.minmaxType=2;a.minmaxBtn.find("i").removeClass("fy-alert-max-btn").addClass("fy-alert-min-btn")}else{a.alertContent.css("height","auto");a.alertBox.css({"margin-left":"auto","margin-top":"auto",left:"auto",top:"auto",});a.alertBox.css({width:a.params.area[0],height:a.params.area[1],});this.setAlertLocation();a.minmaxType=1;a.minmaxBtn.find("i").removeClass("fy-alert-min-btn").addClass("fy-alert-max-btn")}a.setAlertContentHeight()},closeIframe:function(){var a=window.parent.$('iframe[name="'+window.name+'"]').closest(".fy-alert-box");var c=a.next(".fy-alert-shadow");var b=a[0].className.split(" ");b=b[b.length-1];a.addClass(b+"_hide");c.length&&c.fadeOut(300);setTimeout(function(){a.remove();c.length&&c.remove()},300)},closeAll:function(){$("div[id^='alertKey']").remove();$(".fy-alert-shadow").remove()},destory:function(c){var a=$.isPlainObject(c)?c.alertBox:this.alertBox;var b=$.isPlainObject(c)?c.alertShadow:this.alertShadow;$.isPlainObject(c)&&this.setAnimateType(c.params);a.addClass(a.addClass(this.animateType+"_hide"));b.length&&b.fadeOut(300);(function(d,e){setTimeout(function(){d.remove();e.length&&e.remove()},300)})(a,b);typeof(this.params.end)=="function"?this.params.end(this):console.warn("此参数必须是一个方法")},hide:function(d){var b=this;var a=$.isPlainObject(d)?d.alertBox:this.alertBox;var c=$.isPlainObject(d)?d.alertShadow:this.alertShadow;$.isPlainObject(d)&&this.setAnimateType(d.params);a.addClass(a.addClass(this.animateType+"_hide"));c.length&&c.fadeOut(300);setTimeout(function(){a.removeClass(b.animateType).removeClass(b.animateType+"_hide").hide()},300);typeof(this.params.end)=="function"?this.params.end(this):console.warn("此参数必须是一个方法")},show:function(c){var a=$.isPlainObject(c)?c.alertBox:this.alertBox;var b=$.isPlainObject(c)?c.alertShadow:this.alertShadow;$.isPlainObject(c)&&this.setAnimateType(c.params);a.show(0).addClass(this.animateType);b.length&&b.fadeIn(300);typeof(this.params.success)=="function"?this.params.success(this):console.warn("此参数必须是一个方法")}};